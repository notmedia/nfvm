#!/usr/bin/env node

'use strict';

const commander = require('commander');

const pkg = require('../package.json');
const Manager = require('../lib/Manager');

const manager = new Manager(true);

commander.version(pkg.version);

commander.command('init')
  .description('creates .nfvmrc.json config file')
  .action(() => {
    manager.initialize();
  });

commander.command('new <pack_name>').option('-g, --global', 'set nfvm global file config')
  .description('creates new pack of files or new version of pack')
  .option('-v, --pack-version <version>')
  .action((packName, options) => {
    const version = options.packVersion;
    manager.create(packName, version);
  });

commander.command('remove <pack_name>')
  .description('removes pack or pack version')
  .option('-v, --pack-version <version>')
  .action((packName, options) => {
    const version = options.packVersion;
    manager.remove(packName, version);
  });

commander.command('set <pack_name>')
  .description('sets the given version of pack')
  .option('-v, --pack-version <version>')
  .action((packName, options) => {
    const version = options.packVersion;
    manager.set(packName, version);
  });

commander.parse(process.argv);
